<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.example.teamproject.module.board.repository.BoardRepository">

    <sql id="fullColumn">
        idx,
        subject,
        content,
        secret,
        regdt,
        `count`,
        filename


    </sql>



    <!--// 문의게시글 목록 조회-->
    <select id="getBoardList" resultType="com.example.teamproject.module.board.entity.BoardEntity">
        SELECT B.IDX, B.SUBJECT, B.CONTENT, M.NAME, B.REG_DATE, B.COUNT, B.SECRET
        FROM BOARD B, MEMBER M
        WHERE B.ID = M.ID
    </select>



    <!--// 문의게시글 등록-->
    <insert id="insert" parameterType="com.example.teamproject.module.board.entity.BoardEntity">
        INSERT INTO board (
            id,
            subject,
            content,
            secret,
            regdt,
            count,
            filename,
            filesize

        )
        VALUES (
                   #{id},
                   #{subject},
                   #{content},
                   #{secret},
                   #{regdt},
                   #{count},
                   #{filename},
                   #{filesize}
               )
    </insert>


    <!--// Board Total Count : 총 게시물 수-->
    <select id="getBoardTotalCount" parameterType="java.lang.Character" resultType="com.example.teamproject.module.board.entity.BoardEntity">
        SELECT <include refid="fullColumn"/>
        FROM TODO
        WHERE delete_yn = #{deleteYn}
    </select>


    <!--// 문의게시글 목록 조회-->
    <!--<select id="getBoardList" resultType="com.example.teamproject.module.board.entity.BoardEntity">
        SELECT <include refid="fullColumn"/>
        FROM BOARD

    </select>-->



<!--    //게시글 조회수 증가-->
    <update id="incBoardViewCount" parameterType="java.lang.Integer">
        UPDATE 	TODO
        SET     done_yn = #{doneYn},
                delete_yn = #{deleteYn},
                update_date = #{updateDate},
                delete_date = #{deleteDate}
        WHERE	idx = #{idx}
    </update>


    <!--// 선택한 게시글 내용 조회-->
    <select id="getOneBoardContent" parameterType="java.lang.Integer" resultType="com.example.teamproject.module.board.entity.BoardEntity">
        SELECT <include refid="fullColumn"/>
        FROM TODO
        WHERE delete_yn = #{deleteYn}
    </select>


    <!--//게시글 수정-->
    <update id="updateBord" parameterType="com.example.teamproject.module.board.entity.BoardEntity">
        UPDATE 	TODO
        SET     done_yn = #{doneYn},
                delete_yn = #{deleteYn},
                update_date = #{updateDate},
                delete_date = #{deleteDate}
        WHERE	idx = #{idx}
    </update>


    <!--//게시글 삭제-->
    <select id="deleteBord" parameterType="java.lang.Integer" >
        SELECT <include refid="fullColumn"/>
        FROM TODO
        WHERE delete_yn = #{deleteYn}
    </select>


    <!--//게시글 "첨부파일" 삭제-->
    <select id="deleteAttachFile" parameterType="java.lang.Integer" >
        SELECT <include refid="fullColumn"/>
        FROM TODO
        WHERE delete_yn = #{deleteYn}
    </select>


    <!--// 게시판 작성자 ID확인-->
    <select id="getBoardWriterId" parameterType="java.lang.Integer" resultType="java.lang.String">
        SELECT <include refid="fullColumn"/>
        FROM TODO
        WHERE delete_yn = #{deleteYn}
    </select>




</mapper>